<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html
    xmlns="http://www.w3.org/1999/xhtml"><head><meta
        http-equiv="Content-Type"
        content="text/html; charset=UTF-8" /><title
        xmlns:d="http://docbook.org/ns/docbook">6.8. Автоматическое Обновление</title><link
        rel="stylesheet"
        type="text/css"
        href="Common_Content/css/default.css" /><link
        rel="stylesheet"
        media="print"
        href="Common_Content/css/print.css"
        type="text/css" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="generator"
        content="publican v4.3.2" /><meta
        xmlns:d="http://docbook.org/ns/docbook"
        name="package"
        content="Debian-debian-handbook-9-ru-RU-1.0-1" /><meta
        name="keywords"
        content="apt, apt-get, apt-cache, aptitude, synaptic, sources.list, apt-cdrom" /><link
        rel="home"
        href="index.html"
        title="Настольная книга администратора Debian" /><link
        rel="up"
        href="apt.html"
        title="Глава 6. Обслуживание и обновление: инструменты APT" /><link
        rel="prev"
        href="sect.regular-upgrades.html"
        title="6.7. Содержание системы с периодическими обновлениями" /><link
        rel="next"
        href="sect.searching-packages.html"
        title="6.9. Поиск пакетов" /><meta
        name="viewport"
        content="width=device-width, initial-scale=1" /><meta
        name="flattr:id"
        content="4pz9jq" /><link
        rel="canonical"
        href="http://l.github.io/debian-handbook/html/ru-RU/sect.automatic-upgrades.html" /></head><body><noscript><iframe
          src="//www.googletagmanager.com/ns.html?id=GTM-5H35QX"
          height="0"
          width="0"
          style="display:none;visibility:hidden"></iframe></noscript><script
        type="text/javascript">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5H35QX');</script><div
        id="banner"><a
          href="../../"><span
            class="text">Download the ebook</span></a></div><p
        id="title"><a
          class="left"
          href="http://www.debian.org"><img
            alt="Product Site"
            src="Common_Content/images//image_left.png" /></a><a
          class="right"
          href="index.html"><img
            alt="Documentation Site"
            src="Common_Content/images//image_right.png" /></a></p><ul
        class="docnav top"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>Пред.</strong></a></li><li
          class="home">Настольная книга администратора Debian</li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>След.</strong></a></li></ul><div
        class="section"><div
          class="titlepage"><div><div><h2
                class="title"><a
                  id="sect.automatic-upgrades"></a>6.8. Автоматическое Обновление</h2></div></div></div><a
          id="id-1.9.17.2"
          class="indexterm"></a><a
          id="id-1.9.17.3"
          class="indexterm"></a><div
          class="para">
			Поскольку Falcot Corp имеет много компьютеров, но ограничена в численности сотрудников, его администраторы пытаются как можно больше автоматизировать процесс обновления. Поэтому программы, которым поручили выполнение этих процессов, должны выполняться без вмешательства человека.
		</div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.17.5"></a>6.8.1. Конфигурирование <code
                    class="command">dpkg</code></h3></div></div></div><div
            class="para">
				Как мы уже упоминали (смотри вкладку <a
              class="xref"
              href="sect.package-meta-information.html#sidebar.questions-conffiles"><span
                class="emphasis"><em>УГЛУБЛЯЕМСЯ</em></span> Как избежать вопросов по поводу конфигурационных файлов</a>), программе <code
              class="command">dpkg</code> может быть поручено не спрашивать подтверждения при перезаписи конфигурационного файла (с опцией <code
              class="literal">--force-confdef --force-confold</code>). Однако, интерактивно можно выбрать три других варианта: некоторые приходят от самого APT, другие передаются через <code
              class="command">debconf</code>, и иногда случается работа с командной строкой скриптов конфигурации пакета.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.17.6"></a>6.8.2. Настройка APT (конфигурирование)</h3></div></div></div><div
            class="para">
				В случае применения APT - это просто: опция <code
              class="literal">-y</code> (или <code
              class="literal">--assume-yes</code>) скажет APT-у, что надо принимать во внимание - на все вопросы ответ пользователя будет “да”.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.17.7"></a>6.8.3. Настройка <code
                    class="command">debconf</code></h3></div></div></div><div
            class="para">
				При применении <code
              class="command">debconf</code> - эта программа заслуживает больше подробностей. С самого начала эта программа была создана контролировать уместные в данной ситуации вопросы а также их объем, отображаемые пользователю, а также то, как они показаны. Поэтому ее конфигурация нуждается в минимальном уровне приоритета для вопросов; только вопросы свыше минимального уровня приоритета она отобразит. <code
              class="command">debconf</code> допускает ответы по умолчанию для вопросов (определенные сопровождающими пакетов), которые она пропустит.
			</div><div
            class="para">
				Другой, уместный для ознакомления, элемент конфигурации - интерфейс использования программы через оболочку. Если вы измените на вариант <code
              class="literal">noninteractive</code>, то интерактивность с пользователем будет отключена. Если пакет будет пытаться отобразить какие-то информационные сообщение - они будут высылаться на email администратору.
			</div><div
            class="para">
				Для переконфигурирования <code
              class="command">debconf</code>, используйте программу <code
              class="command">dpkg-reconfigure</code> из пакета <span
              class="pkg pkg">debconf</span>; соответствующая команда - <code
              class="command">dpkg-reconfigure debconf</code>. Запомните, что сконфигурированные переменные могут быть временно переопределены другими переменными среды окружения, когда понадобится (для примера, переменная <code
              class="varname">DEBIAN_FRONTEND</code> управляет оболочкой интерфейса, как описано в странице руководства <span
              class="citerefentry"><span
                class="refentrytitle">debconf</span>(7)</span> ).
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.17.8"></a>6.8.4. Управление Взаимодействием Через Командную Строку</h3></div></div></div><div
            class="para">
				Последний ключ взаимодействия, а такой случай нельзя исключить, это запуск конфигурационных скриптов через программу <code
              class="command">dpkg</code>. К сожалению в этом случае нет стандартных решений, и нет ответов в подавляющем большинстве случаев какие ответы лучше, чем другие (то есть в данном случае трудно дать совет - здесь все индивидуально, надо быть очень внимательными).
			</div><div
            class="para">
				Общий подход заключается в подавлении стандартной информации на вводе, перенаправляя пустое содержание <code
              class="filename">/dev/null</code> внутрь этого с командой <code
              class="command"><em
                class="replaceable">command</em> &lt;/dev/null</code>, или поддерживать это с нескончаемый потоком новых строк. Ни один из этих методов не является на 100 % надежным, но они как правило приводят по умолчанию ответ - использовать, так как большинство скриптов полагает при отсутствии ответа, что это является одобрением значения по умолчанию.
			</div></div><div
          class="section"><div
            class="titlepage"><div><div><h3
                  class="title"><a
                    id="id-1.9.17.9"></a>6.8.5. Удивительно хорошая Комбинация</h3></div></div></div><div
            class="para">
				Комбинируя предыдущие элементы, можно создать небольшой, но довольно надежный скрипт, который сможет автоматически обрабатывать обновление.
			</div><div
            class="example"><a
              id="example.non-interactive-upgrade"></a><p
              class="title"><strong>Пример 6.4. Не-интерактивный скрипт обновления</strong></p><div
              class="example-contents"><pre
                class="programlisting">export DEBIAN_FRONTEND=noninteractive 
yes '' | apt-get -y -o DPkg::options::="--force-confdef" -o DPkg::options::="--force-confold" dist-upgrade</pre></div></div><div
            class="sidebar"><div
              class="titlepage"><div><div><p
                    class="title"><strong><span
                        class="emphasis"><em>НА ПРАКТИКЕ</em></span> В качестве примера с компанией Falcot Corp</strong></p></div></div></div><div
              class="para">
				Falcot компьютеры организованы в гетерогенную систему, с машинами, имеющими различные функции. Поэтому администраторы будут подбирать наиболее соответствующие решения для каждого компьютера.
			</div><div
              class="para">
				In practice, the servers running <span
                class="distribution distribution">Stretch</span> are configured with the “miracle combination” above, and are kept up to date automatically. Only the most critical servers (the firewalls, for instances) are set up with <code
                class="command">apticron</code>, so that upgrades always happen under the supervision of an administrator.
			</div><div
              class="para">
				The office workstations in the administrative services also run <span
                class="distribution distribution">Stretch</span>, but they are equipped with <span
                class="pkg pkg">gnome-packagekit</span>, so that users trigger the upgrades themselves. The rationale for this decision is that if upgrades happen without an explicit action, the behavior of the computer might change unexpectedly, which could cause confusion for the main users.
			</div><div
              class="para">
				В лаборатории, несколько компьютеров используют <span
                class="distribution distribution">Testing</span> — чтобы получить пользу от последних программных версий — эти компьютеры не обновляются автоматически. Администраторы только конфигурируют APT для подготовки к обновления, но само обновление не происходит без их контроля. В данном случае обновление происходит следующим образом: когда они решили обновить (вручную), то скучную часть обновления перечня пакетов и загрузки пакетов администраторы постараются избежать (то есть сконфигурированный скрипт сделает это сам), а сами сконцентрируются на действительно полезной части обновления (распаковка, установка, конфигурирование пакетов, ответы на вопросы пакетов).
			</div></div></div></div><ul
        class="docnav"><li
          class="previous"><a
            accesskey="p"
            href="sect.regular-upgrades.html"><strong>Пред.</strong>6.7. Содержание системы с периодическими обновлен...</a></li><li
          class="up"><a
            accesskey="u"
            href="#"><strong>Наверх</strong></a></li><li
          class="home"><a
            accesskey="h"
            href="index.html"><strong>Начало</strong></a></li><li
          class="next"><a
            accesskey="n"
            href="sect.searching-packages.html"><strong>След.</strong>6.9. Поиск пакетов</a></li></ul><div
        id="translated_pages"><ul><li><a
              href="../ar-MA/sect.automatic-upgrades.html">ar-MA</a></li><li><a
              href="../da-DK/sect.automatic-upgrades.html">da-DK</a></li><li><a
              href="../de-DE/sect.automatic-upgrades.html">de-DE</a></li><li><a
              href="../el-GR/sect.automatic-upgrades.html">el-GR</a></li><li><a
              href="../en-US/sect.automatic-upgrades.html">en-US</a></li><li><a
              href="../es-ES/sect.automatic-upgrades.html">es-ES</a></li><li><a
              href="../fa-IR/sect.automatic-upgrades.html">fa-IR</a></li><li><a
              href="../fr-FR/sect.automatic-upgrades.html">fr-FR</a></li><li><a
              href="../hr-HR/sect.automatic-upgrades.html">hr-HR</a></li><li><a
              href="../id-ID/sect.automatic-upgrades.html">id-ID</a></li><li><a
              href="../it-IT/sect.automatic-upgrades.html">it-IT</a></li><li><a
              href="../ja-JP/sect.automatic-upgrades.html">ja-JP</a></li><li><a
              href="../ko-KR/sect.automatic-upgrades.html">ko-KR</a></li><li><a
              href="../nb-NO/sect.automatic-upgrades.html">nb-NO</a></li><li><a
              href="../pl-PL/sect.automatic-upgrades.html">pl-PL</a></li><li><a
              href="../pt-BR/sect.automatic-upgrades.html">pt-BR</a></li><li><a
              href="../ro-RO/sect.automatic-upgrades.html">ro-RO</a></li><li><a
              href="../ru-RU/sect.automatic-upgrades.html">ru-RU</a></li><li><a
              href="../tr-TR/sect.automatic-upgrades.html">tr-TR</a></li><li><a
              href="../vi-VN/sect.automatic-upgrades.html">vi-VN</a></li><li><a
              href="../zh-CN/sect.automatic-upgrades.html">zh-CN</a></li><li><a
              href="../zh-TW/sect.automatic-upgrades.html">zh-TW</a></li></ul></div></body></html>
